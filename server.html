


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Server &mdash; GammaRF 1.2.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="GammaRF 1.2.0 documentation" href="index.html"/>
        <link rel="next" title="Consumers" href="consumers.html"/>
        <link rel="prev" title="Client" href="client.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> GammaRF
          

          
            
            <img src="_static/grflogo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="client.html">Client</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#structure-and-installation">Structure and Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="consumers.html">Consumers</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="links.html">Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GammaRF</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Server</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/server.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="server">
<h1>Server<a class="headerlink" href="#server" title="Permalink to this headline">¶</a></h1>
<p>The client sends its data to the server as JSON objects, on ports defined in the
source.  The default is TCP port 8091 for the command (signalling) channel, and
TCP port 8090 for everything else.</p>
<div class="section" id="structure-and-installation">
<h2>Structure and Installation<a class="headerlink" href="#structure-and-installation" title="Permalink to this headline">¶</a></h2>
<p>When setting up a server, it&#8217;s best to set its time zone to UTC.  The server may
accept data from clients in different time-zones, and having it set to UTC can
resolve confusion.</p>
<p>The server runs in a Docker container.  It relies on some external services.
With the exception of PostgreSQL, these external services must be running on the
same server as ΓRF (localhost).  These services can be deployed with Docker as
well, if you&#8217;d like.</p>
<p>You can adjust parameters relating to the support services by editing the
<tt class="docutils literal"><span class="pre">setupfiles/grf_config.json</span></tt> file.  InfluxDB is assumed to be listening only
on the loopback interface!  ΓRF interacts with these without authentication.</p>
<p>The PostgreSQL database server is used to hold administrative information,
including stations the node will accept data from, a list of &#8216;interesting&#8217;
frequencies, and P25 talkgroups for each node.  If you&#8217;d like a set of users to
be able to send data to the server off the bat, edit the
<tt class="docutils literal"><span class="pre">dbfiles/grf_initial_users.sql</span></tt> file in the server source tree before
building the Docker image.  Users you specify here will exist from the
beginning.</p>
<p>Changes made to the administrative tables will be picked up by the server
modules periodically (the default refresh time is one minute).</p>
<p>ΓRF will install the PostgreSQL tables the first time it is run.  It depends
on a <tt class="docutils literal"><span class="pre">gammarf</span></tt> database existing, and on the user specified in the
configuration file having full permissions on that database.  Running this
in PostgreSQL can make this happen:</p>
<p><tt class="docutils literal"><span class="pre">CREATE</span> <span class="pre">DATABASE</span> <span class="pre">gammarf;</span> <span class="pre">GRANT</span> <span class="pre">ALL</span> <span class="pre">PRIVILEGES</span> <span class="pre">ON</span> <span class="pre">DATABASE</span> <span class="pre">gammarf</span> <span class="pre">TO</span> <span class="pre">gammarf;</span></tt></p>
<p>InfluxDB is used to hold relatively short-term time series information.  The
default retention time is one week.  The retention time can be changed in
the <tt class="docutils literal"><span class="pre">setupfiles/grf_config.json</span></tt> file (this must be done before running the
container for the first time.)  Be careful with this - increasing the retention
time puts additional strain on the server.</p>
<p>Redis needs to be running and listening on the loopback interface.</p>
<p>Once you have the external services referenced above running, build the
container by typing <tt class="docutils literal"><span class="pre">docker</span> <span class="pre">build</span> <span class="pre">.</span></tt> in the top level of the source tree.
Edit the <tt class="docutils literal"><span class="pre">grf_server.sh</span></tt> script in the server source tree to include the
image ID output by the build command, then run that script.  You&#8217;ll be in
the Docker container, and ΓRF server should be running.</p>
<p>Django is running on the ΓRF server, on port 8080.  You can access the
admin interface by logging in at <tt class="docutils literal"><span class="pre">http://[server]:8080/admin/</span></tt> and using
the credentials you entered when prompted, the first time you ran the
Docker container.  From the admin page you can add, delete, and modify rows
in the PostreSQL administration tables.  One of the first things you may
want to do after running the server container is logging in to the admin
interface and adding an initial station.  You can also add &#8220;interesting&#8221;
frequencies for your stations here.  These are frequencies that stations
will report <tt class="docutils literal"><span class="pre">scanner</span></tt> module hits on.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="consumers.html" class="btn btn-neutral float-right" title="Consumers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="client.html" class="btn btn-neutral" title="Client" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, GammaRF.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'',
            VERSION:'1.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>