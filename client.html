

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Client &mdash; ΓRF  documentation</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="top" title="ΓRF  documentation" href="index.html" />
    <link rel="next" title="Server" href="server.html" />
    <link rel="prev" title="Distributed Radio Signal Collection and Analysis" href="index.html" /> 
  </head>
  <body>
      <div class="header"><img class="rightlogo" src="_static/grflogo.png" alt="Logo"/><h1 class="heading"><a href="index.html">
          <span>ΓRF  documentation</span></a></h1>
        <h2 class="heading"><span>Client</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="index.html">Distributed Radio Signal Collection and Analysis</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="server.html">Server</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="client">
<h1>Client<a class="headerlink" href="#client" title="Permalink to this headline">¶</a></h1>
<p>This covers the open-source client.</p>
<a class="reference internal image-reference" href="_images/client.png"><img alt="_images/client.png" src="_images/client.png" style="width: 870.8px; height: 932.4px;" /></a>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/gammarf/gammarf</span></tt></li>
<li>Adjust gammarf.conf.  Get <tt class="docutils literal"><span class="pre">station_id</span></tt> and <tt class="docutils literal"><span class="pre">station_pass</span></tt> from your server administrator</li>
<li><tt class="docutils literal"><span class="pre">./prepare;</span> <span class="pre">./run.sh</span></tt> (assumes you have Docker installed)</li>
<li>If you&#8217;re using HackRF, flash the rom with the newest firmware version.  This is a must!</li>
<li>Make sure all clients are running time synchronization services (ntpd, timesyncd)!</li>
</ol>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>Below is an example configuration file:</p>
<div class="highlight-python"><pre>[modules]
modules = scanner, adsb, freqwatch, remotetask, p25rx, snapshot, tdoa, ism433, single

[connector]
station_id = demo
station_pass = demo1234
server_host = gammarf.io
data_port = 9090
cmd_port = 9091
server_web_proto = http
server_web_port = 8080

[startup]
startup_1010 = adsb
startup_9000 = p25rx 50000
startup_virtual = scanner, freqwatch

[location]
usegps = 0
lat = 39.04
lng = -94.6

[scanner]
# squelch (above avg.) for interesting freqs, must be float
hit_db = 15.0

[rtldevs]
rtl_path = /usr/local/bin

gain_1000 = 23
ppm_1000 = 0
offset_1000 = 0
range_1000 = 30 1600

#gain_1001 = 23
ppm_1001 = 0
offset_1001 = 0
range_1001 = 30 1600

gain_1007 = 23
ppm_1007 = 0
offset_1007 = 0
range_1007 = 30 1600

gain_1008 = 23
ppm_1008 = 0
offset_1008 = 0
range_1008 = 30 1600

[hackrfdevs]
hackrf_path = /usr/local/bin
lna_gain = 32
vga_gain = 40</pre>
</div>
<div class="section" id="configuration-sections">
<h3>Configuration Sections<a class="headerlink" href="#configuration-sections" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ol class="arabic">
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">[modules]</span></tt></dt>
<dd><p class="first last">This section contains a single setting, <em>modules</em>, which is the
list of modules to be loaded by the client.  It&#8217;s alright
to leave this alone, even if you don&#8217;t plan on using every module.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">[connector]</span></tt></dt>
<dd><p class="first last">This section contains information about the station and server.  The station ID
and password must have already been registered with the server.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">[startup]</span></tt></dt>
<dd><p class="first">Modules can be loaded at client start using this section. The format of entries is:</p>
<p><tt class="docutils literal"><span class="pre">startup_{device}</span> <span class="pre">=</span> <span class="pre">{module}</span> <span class="pre">{parameters}</span></tt></p>
<p>Device numbers 9000+ are for pseudo-devices (currently only <cite>p25rx</cite>).  If the device
number is instead the string <cite>virtual</cite>, the module will be assigned to the HackRF,
if one is present.  Only particular modules are able to run on the HackRF.</p>
<p class="last">For RTL-SDR devices, the device number is the serial number.  This can be set with the
<cite>rtl_eeprom</cite> utility.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">[location]</span></tt></dt>
<dd><p class="first last">If <tt class="docutils literal"><span class="pre">usegps</span></tt> is set to 0, the <tt class="docutils literal"><span class="pre">lat</span></tt> and <tt class="docutils literal"><span class="pre">lng</span></tt> settings will be used to determine node
position.  The coordinates should be in decimal degrees.  If <tt class="docutils literal"><span class="pre">usegps</span></tt> is 1, then gpsd
on the local system will be used to determine the node&#8217;s location.  You will want to use GPS
if your node moves around.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">[scanner]</span></tt></dt>
<dd><p class="first last">This section holds scanner module settings.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">[rtldevs]</span></tt></dt>
<dd><p class="first last">The <em>rtl_path</em> setting tells the client where the RTL-SDR tools,
(such as <tt class="docutils literal"><span class="pre">rtl_power</span></tt>) are installed.  <em>gain_{device}</em> defines the
gain of device <em>X</em>.  <em>ppm_{device}</em> defines the ppm (error) value for
device <em>X</em>.  <em>offset_{device}</em> assigns a frequency offset (in MHz)to
the device.  You might set the offset when using an upconverter.
Finally, <em>range{device}</em> specifies the frequency range the device
supports, minimum and maximum in MHz.</p>
</dd>
</dl>
</li>
</ol>
<ol class="arabic" start="10">
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">[hackrfdevs]</span></tt></dt>
<dd><p class="first last">Binary path and gain information for HackRF devices.</p>
</dd>
</dl>
</li>
</ol>
</div></blockquote>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>The client will identify RTL-SDR devices and HackRF.  The client can use many
RTL-SDRs, but only the first HackRF.  Once initialization is complete, you
will be presented with a prompt.  You can use the below commands.  Lines that
start with a <tt class="docutils literal"><span class="pre">#</span></tt> are ignored.  Tab completion is available.</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">devs</span></tt>: Show loaded devices and running modules.  Time is UTC</li>
<li><tt class="docutils literal"><span class="pre">help</span></tt>: Show available commands</li>
<li><tt class="docutils literal"><span class="pre">interesting_add</span></tt>: Add an entry to the station&#8217;s &#8216;interesting&#8217; list</li>
<li><tt class="docutils literal"><span class="pre">interesting_del</span></tt>: Remove an entry from the station&#8217;s &#8216;interesting&#8217; list</li>
<li><tt class="docutils literal"><span class="pre">interesting</span></tt>: Show the station&#8217;s current &#8216;interesting&#8217; list</li>
<li><tt class="docutils literal"><span class="pre">location</span></tt>: Show the location the client currently thinks it is at</li>
<li><tt class="docutils literal"><span class="pre">message</span></tt>: Send a messager to another node.  If the node is not logged
in when the message is sent, the message will be retrieved when it logs
in.  <tt class="docutils literal"><span class="pre">&gt;</span> <span class="pre">message</span> <span class="pre">[target]</span> <span class="pre">[message]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">mods</span></tt>: List available modules and show their usage information</li>
<li><tt class="docutils literal"><span class="pre">now</span></tt>: Show the current date and time, according to the node (UTC)</li>
<li><tt class="docutils literal"><span class="pre">pwr</span></tt>: Show power at a frequency (requires HackRF)</li>
<li><tt class="docutils literal"><span class="pre">quit</span></tt>: Exit the client</li>
<li><tt class="docutils literal"><span class="pre">remotetask</span></tt>: Request a module to be run on another node (the node must
be listening for requests of this type)</li>
<li><tt class="docutils literal"><span class="pre">reserve</span></tt>: Reserve a device</li>
<li><tt class="docutils literal"><span class="pre">run</span></tt>: Run a module.  Module arguments can be seen in the module&#8217;s
section in the output of the <tt class="docutils literal"><span class="pre">mods</span></tt> command</li>
<li><tt class="docutils literal"><span class="pre">settings</span></tt>: Show / toggle a module&#8217;s settings.  Each module may have its
own settings.  Settings are shown in the output of the <tt class="docutils literal"><span class="pre">mods</span></tt> command,
or can be seen by typing <tt class="docutils literal"><span class="pre">settings</span> <span class="pre">{module}</span></tt>.  Settings are toggled
by typing <tt class="docutils literal"><span class="pre">settings</span> <span class="pre">{module}</span> <span class="pre">{setting-name}</span> <span class="pre">{value}</span></tt>.  In the case
of boolean settings, <tt class="docutils literal"><span class="pre">{value}</span></tt> is omitted</li>
<li><tt class="docutils literal"><span class="pre">stop</span></tt>: Stop a job.  The device index is used in conjunction with this
command, e.g. <tt class="docutils literal"><span class="pre">stop</span> <span class="pre">1</span></tt>.  The device will be available for use with
another module (or another instance of the same module) after <tt class="docutils literal"><span class="pre">stop</span></tt>
has been run on it.  For modules that run on the HackRF, the device
&#8216;numbers&#8217; are letters that are reclaimed when the module finishes running.</li>
<li><tt class="docutils literal"><span class="pre">unreserve</span></tt>: Unreserve a device that has been reserved with the <tt class="docutils literal"><span class="pre">reserve</span></tt> command</li>
<li><tt class="docutils literal"><span class="pre">stations</span></tt>: Show stations associated with the cluster</li>
<li><tt class="docutils literal"><span class="pre">tdoa</span></tt>: Request stations to cooperate in a TDOA measurement</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="modules">
<h2>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h2>
<p>A list of currently implemented modules follows.  See the output of the <tt class="docutils literal"><span class="pre">mods</span></tt>
command for usage instructions.</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">adsb</span></tt>:  Aircraft telemetry (ADS-B) module.  Decodes ADS-B broadcasts
sent by aircraft.</li>
<li><tt class="docutils literal"><span class="pre">freqwatch</span></tt>:  Report the power of each of the station&#8217;s &#8216;interesting&#8217;
frequencies periodically.</li>
<li><tt class="docutils literal"><span class="pre">p25rx</span></tt>: A pseudo-module that doesn&#8217;t do much itself.  It accepts output
from the <a class="reference external" href="https://github.com/robotastic/trunk-recorder/">trunk-recorder</a>
<tt class="docutils literal"><span class="pre">recorder</span></tt> command, piped over a UDP socket and sends summary information
to the server.</li>
<li><tt class="docutils literal"><span class="pre">remotetask</span></tt>: Accept jobs for a certain type of module from others.</li>
<li><tt class="docutils literal"><span class="pre">scanner</span></tt>: This module receives a list of &#8220;interesting&#8221; frequencies for
your node from the server, and monitors their signal levels.  It behaves sort
of like a handheld radio scanner - it will report frequencies that exceed the
squelch (a configurable level above the average at that frequency.)  Be
careful adjusting this module&#8217;s <tt class="docutils literal"><span class="pre">hit_db</span></tt> parameter.  If it&#8217;s too low, noise
will trigger false hits.  Particularly noisy frequencies may do that, anyway.</li>
<li><tt class="docutils literal"><span class="pre">single</span></tt>: Monitor a single frequency for power above a specified threshold</li>
<li><tt class="docutils literal"><span class="pre">snapshot</span></tt>: Take a picture of a swath of the RF spectrum and send it to
the server.</li>
<li><tt class="docutils literal"><span class="pre">ism433</span></tt>: Collect and send ISM433 (such as Tire Pressure Monitoring System
(TPMS) information)</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="misc-considerations">
<h2>Misc. Considerations<a class="headerlink" href="#misc-considerations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="usb-bandwidth">
<h3>USB Bandwidth<a class="headerlink" href="#usb-bandwidth" title="Permalink to this headline">¶</a></h3>
<p>Use a maximum of four sticks per USB <em>controller</em>.  A controller is not
the same thing as a port.  If you start having problems with device errors,
segfaults, or other weird errors, try using less devices per controller.
Give the HackRF its own dedicated USB 3.x controller.</p>
</div>
<div class="section" id="noise">
<h3>Noise<a class="headerlink" href="#noise" title="Permalink to this headline">¶</a></h3>
<p>Keep your receivers a good distance from your computer and other electronics.
Keep your antenna(s) by the window.</p>
</div>
<div class="section" id="gps">
<h3>GPS<a class="headerlink" href="#gps" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">gpsd</span></tt> needs to be running and listening on localhost for GPS to work.
If you have problems with GPS, see
<a class="reference external" href="http://www.catb.org/gpsd/installation.html">this page</a>.</p>
</div>
<div class="section" id="ports">
<h3>Ports<a class="headerlink" href="#ports" title="Permalink to this headline">¶</a></h3>
<p>The following ports are used for communications, and should be opened on
the system firewall.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="14%" />
<col width="11%" />
<col width="15%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Port</th>
<th class="head">Protocol</th>
<th class="head">In/Out</th>
<th class="head">Bandwidth</th>
<th class="head">Use</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>8090</td>
<td>TCP</td>
<td>Out</td>
<td>High</td>
<td>General I/O - to server only</td>
</tr>
<tr class="row-odd"><td>8091</td>
<td>TCP</td>
<td>Both</td>
<td>Low</td>
<td>Command channel</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="hardware">
<h3>Hardware<a class="headerlink" href="#hardware" title="Permalink to this headline">¶</a></h3>
<p>Various RTL-SDR vendors exist, and accessories (antennas, amplifiers, filters)
are plentiful.  Here are some tips for picking the right stuff.</p>
<ul class="simple">
<li>The metal-cased RTL-USB sticks work pretty well.  Look for something with
a low PPM.</li>
<li>It&#8217;s critical to have the right antenna for the job.  If you are scanning
different frequency bands, have antennas that suit each one.</li>
<li>Sharing an antenna (through a splitter) results in less power being fed to
each stick.  One antenna to two sticks, half the power.  And so on.</li>
<li>If you keep your antenna next to a window, you&#8217;ll see a big increase in power
over keeping it far from a window.  If you keep it outside the window, even
on the outside ledge, you may see a much larger increase.</li>
<li>For ADS-B, get one of the RTL-SDR dongles specifically made for this (you
can find them on Amazon); they include an amplifier and filter.  You also
definitely need an antenna that covers the ADS-B frequency band.</li>
<li>Keep your sticks far from generators of EM noise, like your PC and monitor.
Use long USB cables if necessary.  Clamp on ferrite beads to each end of
the USB cables.</li>
<li>If you use your sticks with a USB hub, make sure the hub is externally
powered.</li>
</ul>
</div>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="index.html">Distributed Radio Signal Collection and Analysis</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="server.html">Server</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2018, ΓRF.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>